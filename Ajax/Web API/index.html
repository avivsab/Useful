<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <!-- <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/> -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
      
    <title>Fetch API's</title>
</head>
<body>
    <a class="waves-effect waves-light btn getUser"><i class="material-icons left">cloud</i>User From Cloud</a>
    
    <div class="container"> <i class="medium material-icons" onclick="initalView()">adjust</i></div>
   
    <script>
        const state = {
            user: null,
            users:[]
        };
        function loadUser() {
            const URL = 'https://randomuser.me/api/';
            const requestUser = fetch(URL);
            requestUser.catch(() => alert('error reaching the API'));
            const getUserJSON = requestUser.then(response => response.json());
            getUserJSON.then(data => {
                state.user = data.results[0];
                state.users.push(data.results[0])
            });
        };
        loadUser();
        const container = document.getElementsByClassName('container')[0];
        document.querySelector('.getUser').onclick = () => {
            console.log(state.user);
            loadUser();
            const user = `
            <div class="col s12 m8 offset-m2 8 offset-l3">
    <div class="card-panel grey lighten-5 z-depth-1">
      <div class="row valign-wrapper">
        <div class="col s2">
          <img src="${state.user.picture.medium}" alt="Random user" class="circle responsive-img"> <!-- notice the "circle" class -->
        </div>
        <div class="col s10">
          <span class="black-text">
            This is a image of <span style="color: chocolate">${state.user.name.first} ${state.user.name.last}</span>. Add the "circle" class to it to make it appear circular.
          </span>
        </div>
      </div>
    </div>
  </div>
        
            `
            container.innerHTML += user;
            return user;       
        };       
        function initalView(){          
            container.innerHTML = ' <i class="medium material-icons" onclick="initalView()">adjust</i>';
        };
    </script>  
</body>
</html>

